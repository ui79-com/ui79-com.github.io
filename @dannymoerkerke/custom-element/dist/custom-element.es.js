class CustomElement extends HTMLElement{constructor(){super(),this.state={}}isCustomElement(a){return"CustomElement"===Object.getPrototypeOf(customElements.get(a.tagName.toLowerCase())).name}updateBindings(a,b=""){const c=[...this.selectAll(`[data-bind$="${a}"]`)];c.forEach(a=>{const c=a.dataset.bind,d=c.includes(":")?c.split(":").shift():c,e=c.includes(".")?c.split(".").slice(1).reduce((a,b)=>a[b],b):b,f=[...this.selectAll(a.tagName)].find(b=>b===a),g=c.includes(":")&&this.isCustomElement(f);g?f.setState({[`${d}`]:e}):this.isArray(e)?f[d]=e:a.textContent=e.toString()})}setState(a){Object.entries(a).forEach(([a,b])=>{this.state[a]=this.isObject(this.state[a])&&this.isObject(b)?{...this.state[a],...b}:b;const c=this.isObject(b)?this.getBindKey(a,b):a,d=this.isArray(c)?c:[c];d.forEach(a=>this.updateBindings(a,b))})}getBindKey(a,b){return Object.keys(b).map(c=>this.isObject(b[c])?`${a}.${this.getBindKey(c,b[c])}`:`${a}.${c}`)}isArray(a){return Array.isArray(a)}isObject(a){return"[object Object]"===Object.prototype.toString.call(a)}select(a){return this.shadowRoot?this.shadowRoot.querySelector(a):this.querySelector(a)}selectAll(a){return this.shadowRoot?this.shadowRoot.querySelectorAll(a):this.querySelectorAll(a)}multiSelect(a){Object.entries(a).forEach(([a,b])=>{this[a]=this.select(b)})}show(a=null){const b=a||this,c=Array.isArray(b)||NodeList.prototype.isPrototypeOf(b)?b:[b];c.forEach(a=>{a.style.display="",a.removeAttribute("hidden")})}hide(a=null){const b=a||this,c=Array.isArray(b)||NodeList.prototype.isPrototypeOf(b)?b:[b];c.forEach(a=>{a.style.display="none",a.setAttribute("hidden","")})}css(a,b){const c=Array.isArray(a)?a:[a];c.forEach(a=>Object.assign(a.style,b))}addTemplate(a,b,c=!1){const d=this.select(b).content.cloneNode(!0);c?a.innerHTML="":null,a.appendChild(d)}}export{CustomElement};
